[mlimg]
[xlang:en]
====  pico - the module for static contents  ===

[b]pico[/b] is a module for static contents based on Duplicatable V3 (D3).

This is developping version.
Don't forget updating this module after overwritting older version.
And you have to "sync" once on upgrading from 1.1x/1.2x

Though functionally pico looks a successor to TinyD, pico is made as full-scratched module.

TinyD became a deprecated module because pico has been marked as stable.
Of course, you can upgrade your contents from TinyD to pico easily.


[b]SPEC:[/b]

- hierarchical category
- breadcrumbs
- page navigation
- XOOPS_TRUST_PATH/wraps/(dirname) files manual page-wrapping
- XOOPS_TRUST_PATH/wraps/(dirname) files automatic page-wrapping/transfer
- static URI (same as wraps)
- overridable options at each categories
- body filter system (smarty, wiki, php etc.)
- better preview
- contents cache
- tell a friend link (tellafriend module supported natively)
- printer friendly view
- singlecontent view
- html header customize per module/categories
- html header customize per contents
- search (with context)
- counts views
- list block (duplicatable)
- menu block (duplicatable)
- contents block (duplicatable)
- contents controller for admin
- dynamic submenu
- native d3forum comment-integration
- Wysiwyg Editor (common/spaw and common/fckeditor)
- import from TinyD per a module
- import from pico per a module
- import from pico per a content
- plugin for sitemap module
- vote
- automated menu page
- approval system for creating contents
- approval system for modifying contents
- event notification for waiting approval
- plugin for waiting module
- RSS (both entire module and each categories)
- auto-registering wrapped files into DB
- xoops_breadcrumbs
- static URI by mod_rewrite (both wraps mode and normal mode)
- refer histories of contents
- language constants override system


[b]USAGE:[/b]

(0) Install altsys before using pico.

(1) copy html/modules/pico into your modules/

(2) name the directory name as you like.

(3) copy two files under html/class/smarty/plugins/ in the archive into your class/smarty/plugins/

(4) make a new folder out of DocumentRoot  eg) /home/yourhome/xoops_trust_path/

(5) insert a line into just after defining XOOPS_URL in mainfile.php. (Edit '/ho
me/yourhome/xoops_trust_path')
[code]
        define('XOOPS_TRUST_PATH','/home/yourhome/xoops_trust_path');
[/code]

(6) make a directory 'modules' under the directory. (XOOPS_TRUST_PATH/modules/)

(Since the steps of (4)(5)(6) are the same as altsys or D3 modules, you need not to do the steps if you've already done it.)

(7) copy xoops_trust_path/modules/pico into XOOPS_TRUST_PATH/modules/

(8) install it in XOOPS modulesadmin

(9) set group permissions of the TOP category in admin area

You did it.
you can add categories or contents as you like.

And you'd better install d3forum also.
(pico supports comment system integrated with d3forum only)



[b]NOTICE:[/b]

You have to turn "module cache" off about this module.
pico is fast enough if you use content's cache.


[b]HISTORY:[/b]

1.35 beta (2007/05/29)
- modified interfaces managing contents/categories
- added drop-down controller for vpath 
- modified wrapping speed
- fixed small typo in submenu (thx taku777)
- modified deals of poster/modifier (thx starck) 1.35a

1.34 beta (2007/05/17)
- added D3Comment callback
- added language files
-- schinese (thx chnwalkman)

1.33 beta (2007/05/15)
- fixed a typo in vote
- fixed a typo in tellafriend

1.32 beta (2007/05/14)
- templatized block editing area
- added an option to display body also into list block
- modified content block can select a content from listdown box.
- modified links in content block from relative to absolute on wraps mode
- fixed links in content block above (thx makimaki) 1.32a
- updated language files
-- persian (thx voltan)

1.31 alpha (2007/05/07)
- changed the structure "altsys essential"
- added language constants override system (with altsys>=0.5)
- templatized mymenu (with altsys>=0.5)
- modified many templates
- modified php removing duplicated codes
- modified SQLs common as possible
- added language files
-- japaneseutf
-- italian (thx evoc)
- modified the interface for mylangadmin 1.31a

1.30 alpha (2007/04/21)
- modified addslashes() into mysql_real_escape_string()
- addded some redundants informations
- changed the top category editable (like normal category)
- modified pagewrap returns just between <body> and </body>
- added pico's special Smarty plugin system
- added pico's Smarty plugins
-- pico contents <{pico}>
-- d3pipes entries <{d3pipes}>

1.20 (2007/04/18)
- numbered as stable version

1.18 beta (2007/03/29)
- fixed bugs for invisible content
- modified only moderators can enable HTML headers
- modified moderators can change created/modified time
- modified blocks for xugj_block plugin
- fixed modified time is updated unexpectedly 1.18a (thx starck)

1.17 beta (2007/03/23)
- fixed category's permissions is not affected in search
- added a configuration using concept of "poster" in search
- updated mymenu
- changed some text field into mediumtext 1.17a
- minor fixes 1.17a

1.16 beta (2007/03/20)
- added history diff
- modified viewer of histories
- fixed the checker for duplicated vpaths 1.16a
- separated two features viewer and downloader of histories 1.16a

1.15 beta (2007/03/16)
- fixed a typo in header('Expires'...) (thx rock)
- fixed css template does not work (thx mizukami) 1.15a
- fixed calculation of time offsets of RSS (thx Yoshii) 1.15b

1.14 beta (2007/03/13)
- modified CSS of this module's template into a template
- added two configs about the feature of history
- modified module_icon.php cacheable for web browser
- modified images etc. transferred by php in wraps cacheable for web browser
- added referring feature to deleted contents (in contents manager for admin)
- fixed a typo in contents controller for admin 1.14a (thx t_yamo)

1.13 beta (2007/03/10) update the module
- added history
- added a config for sitemap plugin (also display contents or not)
- added a config for submenu (also display contents or not)

1.12 beta (2007/03/09) overwrite public side also
- modified html/css radically (thx emomo)
- modified sitemap plugin
- added mod_rewrite mode for categories
- fixed notice in submenus (thx starck)

1.11 beta (2007/03/07)
- added mod_rewrite mode

1.10 beta (2007/03/06)
- added hierarchical submenu
- added a config of prohibited filters
- added a config of forced filters

0.99RC4->1.00 (2007/03/05)
- fixed xoops_breadcrumbs (thx starck)
- fixed form template to edit content

0.98->0.99RC4
- added xoops_breadcrumbs
- added singlecontent
- fixed preview with wraps mode (thx toplan)
- fixed checking of permission of making subcategories (thx t_yamo)
- fixed a plugin for sitemap module (thx starck)

0.97->0.98RC3
- fixed some minor bugs
- added language files
-- persian (thx voltan)
-- spanish (thx PepeMty) 0.98a
-- french (thx gigamaster) 0.98b

0.96->0.97RC2
- modified the filter of xoopstpl radically
- fixed RSS encoding conversion
- fixed wrapping encoding conversion
- fixed mymenu's wrong link (thx umasan)

0.95->0.96RC
- upgraded the version as RC
- modified treating directory in wraps mode
- added sync tables
- fixed filter xoopstpl
- checked compatibility with XOOPS Cube 2.1 Legacy
- fixed some bugs (thx starck)
- fixed a looping bug (thx photositelinks&starck) 0.96a

0.90->0.95beta (update the module essentially)
- added RSS
- added auto-registering wrapped files into DB

0.40->0.90beta (update the module essentially)
- upgraded the version as BETA
- added static URI (same as wraps)
- added auto-page-wrap
- added manual-page-wrap
- fixed top page with wraps mode (thx Kaz) 0.90a

0.32->0.40
- added concept of waiting
- added a plugin for waiting
- added a notification for waiting

0.31->0.32  (update the module essentially)
- fixed the problem 30 character limits in config table (thx starck)
- modified index menu (thx emomo) 0.32a

0.30->0.31
- modified compatibility with MySQL5 (thx sakichi)

0.22->0.30  (update the module essentially)
- added vote
- added index menu
- added sitemap plugin
- added export to the other pico per contents
- fixed top contents cannot be accessed (thx starck and emomo) 0.30a

0.21->0.22
- fixed menu block (thx kuon)
- added list block
- fixed importing from TinyD
- modified invisible contents
- fixed templates for list block (thx choromo) 0.22a

0.20->0.21
- fixed page navigation (thx PhotoSiteLinks)

0.10->0.20  (update the module essentially)
- rebuilt permission system
- added a permission of "full read"
- added submenu for "main menu"
- added WYSIWYG Editors (common/spaw and common/fckeditor)
- added a feature of importing from TinyD
- added a feature of importing from the other pico
- modified top category's permission (0.20a)


[/xlang:en]
[xlang:ja]
====  静的コンテンツ用モジュール pico  ===

pico とは Duplicatable V3 (D3) 技術を応用した静的コンテンツ用モジュールです。
開発当初から想定していた機能を一通り実装したこともあり、現時点では1.20を安定版としています。

ちらの1.3xは機能向上を目的とした開発版です。やる気のある方はぜひこちらをお試しください。開発版なので、特には書きませんが、バージョンアップ時のモジュールアップデートはほぼ必須です。

また、1.1/1.2 からアップデートした際には、モジュールアップデート後に、管理画面の「インポート/同期」から「同期」を最低1度実行してください。


以下、安定版・開発版共通。

D3モジュールなので、XOOPS_TRUST_PATH についての設定が必要です。
（すでにこのあたりの設定がしてあれば、とても簡単にインストールできます）

機能的には、TinyDの後継という位置づけですが、コード的には完全なフルスクラッチであり、TinyDとは（もちろんTinyContentとも）完全に独立しています。なお、picoが安定版となったので、TinyDは開発終了とします。もちろん、TinyDからのアップグレードパスは用意してますので、必要に応じて、適宜引っ越してください。少なくとも、picoがTinyDに機能的に劣ることはないはずです。


[b]SPEC:[/b]

・階層カテゴリー
・パンくず
・ページナビゲーション
・XOOPS_TRUST_PATH/wraps/(dirname)ファイルの手動ページラップ
・XOOPS_TRUST_PATH/wraps/(dirname)ファイルの自動ページラップ/転送
・静的URI (wraps方式)
・カテゴリーOption Overrideシステム
・任意の順番でかけることのできるフィルター群（新たに Smarty追加）
・プレビュー
・本文キャッシュ（代わりにXOOPSのモジュールキャッシュは利用不可）
・文字化けのない友達紹介リンク
・プリンタ用画面
・シングルコンテント画面
・モジュール・カテゴリーレベルのHTMLヘッダ
・コンテンツ毎のHTMLヘッダ（上とは独立）
・検索（XOOPS検索の本文表示対応）
・閲覧数カウント
・ブロック「コンテンツ一覧」複製可
・ブロック「メニュー」複製可
・ブロック「コンテンツ表示」複製可
・管理者用記事一覧管理
・サブメニュー（ただし、メインメニューで自分自身が選択されている場合のみ）
・d3forum nativeコメント統合
・Wysiwyg Editor (common/spaw と common/fckeditorの両対応)
・TinyDからのインポート（モジュールまるごと）
・他のpicoからのインポート（モジュールまるごと）
・他のpicoへのエクスポート（記事単位）
・sitemapプラグイン
・投票
・目次ページ
・新規登録の承認制
・変更申請の承認制
・申請があったことへのイベント通知
・申請に対するwaitingプラグイン
・新着RSS（モジュール全体およびカテゴリー毎）
・ラップページ自動登録
・xoops_breadcrumbs規格に対応
・階層サブメニュー
・mod_rewriteによる静的URI(wrapsモードおよびnormalモード)
・コンテンツ編集履歴機能
・言語定数オーバーライドシステム


[b]USAGE:[/b]

(0) pico1.3から、altsysが必須となりました。picoより先にaltsysをインストールしてください。

(1) アーカイブを展開して、html/modules/pico を moduels の下にコピー

(2) ディレクトリ名は好きにつけてください。（"pico"をリネーム可）

(3) アーカイブ内の html/class/smarty/plugins/ にあるファイル２つを class/smarty/plugins/ の下にコピーしてください (d3forum等と同じです）

(4) DocumentRootの外に専用のディレクトリを作ります  例) /home/yourhome/xoops_trust_path/

(5) そのディレクトリのフルパスをmainfile.phpに記述します。場所はXOOPS_URL定義行の直後が良いでしょう。
[code]
	define('XOOPS_TRUST_PATH','/home/yourhome/xoops_trust_path');
[/code]

(6) XOOPS_TRUST_PATHの下にmodulesディレクトリを作ります (XOOPS_TRUST_PATH/modules/)
（ステップ(4)〜(6)は、altsysや各種D3モジュールと共通ですので、すでに行ってあればスキップして構いません）

(7) アーカイブのxoops_trust_path/modules/picoをXOOPS_TRUST_PATH/modules/にコピーします。（この"pico"はリネームしないでください）

(8) XOOPSモジュールとしてインストールしてください。

(9) 管理者画面のカテゴリー権限設定で、トップカテゴリーについての権限をこの時点で設定しておくと後々楽が出来るかも知れません。


あとはTinyDの操作を知っていれば、そう難しいことはないと思います。
カテゴリーやコンテンツを追加していくだけです。
d3forumを一緒にインストールすると幸せになれるかもしれません。
（というか、d3forumがないとコメント機能は利用できません）


[b]NOTICE:[/b]

このモジュールは、TinyDと違い、モジュールキャッシュ非推奨です。本文キャッシュ機能があるので十分に速いはずです。


[b]HISTORY:[/b]

1.35 beta (2007/05/29)
- 各種操作性の向上
- 管理者のみ、ラップディレクトリから選択できるようにした
- 処理速度改善
- サブメニュー処理のtypo修正 (thx taku777)
- 投稿者・更新者処理の改善 (thx starck) 1.35a

1.34 beta (2007/05/17)
- D3Commentのコールバック処理対応
- 言語ファイル追加
-- schinese (thx chnwalkman)

1.33 beta (2007/05/15)
- 投票関連のtypoを修正
- tellafriendリンクのtypoを修正

1.32 beta (2007/05/14)
- ブロック編集部分をテンプレート化した
- 一覧ブロックに本文表示機能追加
- 内容表示ブロックの選択方法変更
- wrapsモードコンテンツをブロック表示する際に、相対->絶対パス変換をするよう変更
- 同上パス修正 (thx makimaki) 1.32a
- 言語ファイル更新
-- persian (thx voltan)

1.31 alpha (2007/05/07)
- 正式にaltsys必須とした
- 文字定数オーバーライドシステムを導入した（要altsys-0.5以上）
- mymenuのテンプレート化（要altsys-0.5以上）
- テンプレートを少しでも使いやすく変更
- 重複コードを整理した
- 一般的なSQL構文だけにしてみた
- 言語ファイル追加
-- japaneseutf
-- italian (thx evoc)
- mylangsadminへの接続部分の互換性改善 1.31a

1.30 alpha (2007/04/21)
- addslashes()をmysql_real_escape_string()にしてみた
- カテゴリとコンテンツに冗長情報フィールドを追加した
- トップカテゴリーを通常のカテゴリーとして編集可能にした
- ページラップ時に、常に<body></body>の内側を返すようにした
- pico専用Smartyプラグインシステムの実装
- pico専用Smartyプラグインの追加
-- pico内容表示 <{pico}>
-- d3pipes表示  <{d3pipes}>

1.20 (2007/04/18)
- 安定版としてのリリース

1.18 beta (2007/03/29)
- 非表示コンテンツの閲覧・編集権限処理を修正
- HTMLヘッダの編集は管理者かモデレータでないと最終的に有効にならないよう仕様変更
- 管理者/モデレータは各日時をいじれるようにした
- xugj_blockプラグインへの対応
- 更新日が予想外のタイミングで更新されてしまうバグを修正 1.18a (thx starck)

1.17 beta (2007/03/23)
- 検索で権限が反映されていないバグの修正
- 検索に「投稿ユーザ」という概念を導入するかどうかの設定を追加
- mymenuの更新
- 一部のtextをmediumtextに変更 1.17a
- 細かな修正 1.17a

1.16 beta (2007/03/20)
- 履歴比較機能実装
- ヒストリ参照機能の改善(IE対策)
- 仮想パス重複チェックのバグを修正 1.16a
- 参照とダウンロードを機能として分けた 1.16a

1.15 beta (2007/03/16)
- HTTPヘッダ送出でのtypoを修正 (thx rock)
- テンプレートCSSが効いていないのを修正 (thx mizukami) 1.15a
- RSSの時差計算が間違っていたのを修正 (thx Yoshii) 1.15b

1.14 beta (2007/03/13)
- モジュールCSSのテンプレート化
- 履歴機能関連の設定追加
- モジュールアイコンをブラウザキャッシュ可能にした
- wrapsモードで転送する画像等をブラウザキャッシュ可能にした
- 削除済コンテンツの参照機能（コンテンツ一括管理）
- コンテンツ一括管理のtypo修正 1.14a (thx t_yamo)

1.13 beta (2007/03/10) モジュールアップデート必須
- 履歴機能の実装
- sitemap用プラグインの動作設定（コンテンツも同列表示するかどうか）追加
- サブメニューの動作設定（コンテンツも同列表示するかどうか）追加

1.12 beta (2007/03/09) 公開側も上書きする必要あり
- HTML/CSSを抜本的に書き直した (thx emomo)
- sitemap用プラグインの改善（改悪か？）
- カテゴリーURIも mod_rewriteモード に対応した
- サブメニュー関連のNotice潰し (thx starck)

1.11 beta (2007/03/07)
- mod_rewriteモード新設

1.10 beta (2007/03/06)
- 階層サブメニュー追加
- 禁止フィルター追加
- 強制フィルター追加

0.99RC4->1.00 (2007/03/05)
- xoops_breadcrumbs の修正 (thx starck)
- 編集テンプレートのおかしかったところを修正

0.98->0.99RC4
- xoops_breadcrumbs に対応
- シングルコンテント追加
- wrapsモードでのプレビューが機能していなかったのを修正 (thx toplan)
- subcategory権限が正しく機能していなかったバグの修正 (thx t_yamo)
- sitemapプラグインのバグ修正 (thx starck)

0.97->0.98RC3
- 細かなバグ修正数件
- 言語ファイル追加
-- persian (thx voltan)
-- spanish (thx PepeMty) 0.98a
-- french (thx gigamaster) 0.98b

0.96->0.97RC2
- Smarty(XoopsTpl)フィルターの動作修正（XOOPS専用テンプレート変数が使えるように）
- RSSのエンコーディング処理変更（要テンプレートマージ）
- ラップファイルのエンコード変換処理の修正
- mymenuが誤ったリンクを指し示す問題の修正 (thx umasan)

0.95->0.96RC
- だいたいの動作確認がとれたので、RC版扱いに格上げした
- wrapsモードでのディレクトリの扱い改善
- 同期実装
- Smartyフィルターの動作がおかしかったのを改善
- XOOPS Cube 2.1 Legacy での動作確認
- いくつかのバグ修正 (thx starck)
- 無限ループバグを修正 (thx photositelinks&starck) 0.96a

0.90->0.95beta （※モジュールアップデート必須）
- RSS追加
- ラップページ自動登録追加

0.40->0.90beta （※モジュールアップデート必須）
- 一通り機能を実装したので、β版扱いに格上げした
- 静的URIの実装 (wraps方式)
- 自動ページラップの実装
- 手動ページラップの実装（コンテンツ追加で、フィルター指定する）
- トップページの処理がおかしかったのをfix (thx Kaz) 0.90a

0.32->0.40
- 承認待ち、という概念を実装した
- waitingモジュール用プラグインの追加
- 承認待ちイベント通知の実装

0.31->0.32（※モジュールアップデート必須）
- 一般設定が30字制限に引っかかっていたのを修正 (thx starck)
- コンテンツメニュー処理の改善 (thx emomo) 0.32a

0.30->0.31
- MySQL5 との互換性問題を改善 (thx sakichi)

0.22->0.30（※モジュールアップデート必須）
- 投票を実装
- コンテンツメニューを実装
- sitemapプラグインを実装
- 他のpicoへのコンテンツごとのエクスポートを実装
- トップ直下のコンテンツにアクセスできないバグを修正 (thx starck and emomo) 0.30a

0.21->0.22
- メニューブロックが機能していなかったのを修正 (thx kuon)
- 一覧ブロックを追加
- TinyDからのインポート関連のデバッグ
- 管理者でも非表示コンテンツは見えないようにした
- 一覧ブロックのテンプレート修正 (thx choromo) 0.22a

0.20->0.21
- ページナビが正常に動作しなかったのを修正 (thx PhotoSiteLinks)

0.10->0.20 （※モジュールアップデート必須）
- 権限システムの作り直し （0.1を使っていた人は、再度、カテゴリー権限を設定しなおしてください）
- 本文の全文表示、という権限の追加
- メインメニュー用サブメニュー処理
- WYSIWYG Editor選択 (common/spaw および common/fckeditor)
- TinyDからのインポート
- 他のpicoからのインポート
- トップカテゴリーの権限処理を修正 (0.20a)


バグ報告を歓迎します。


[/xlang:ja]
